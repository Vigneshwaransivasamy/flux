!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.fluxi={})}(this,function(t){"use strict";function e(t){var e=[],r=t.length;let n=0;for(;r>n;)e.push(t[n]),n++;return e}function r(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function n(t,e){return function(){return new Promise((r,n)=>(t.apply(this,arguments).then(function(t){r(e.call(this,t))}).catch(n),e))}}function o(){var t;f(arguments[0])?(t=arguments[0],Array.prototype.shift.call(arguments)):t=!0;var e=arguments,o=0,i=arguments.length,c=arguments[0],u=t?r:n;if(1==i)return arguments[0];if(2==i)return u(e[0],e[1]);for(;i-1>o;)c=u(c,e[o+1]),o++;return c}function i(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",n=0;t>n;n++)e+=r.charAt(Math.floor(64*Math.random()));return e}function c(t,e){for(var r in t)p(t[r])&&(t[r]=l(t[r],e));return t}function u(t,e){return t.subscribe=function(t){if(a(Function)(t)){var r=y();return e.set(r,t),r}return Error("Type Error: subscriber should be of type Function")},t.unsubscribe=function(t){return e.has(t)?e.delete(t):Error("Type Error: subscriber should be of type Function")},t}function l(t,e){function r(t){o.forEach(function(e){e(t)})}var n=!e,o=e||new Map,i={get:function(t,e){return t[e]},set:function(t,e,n){var i=null,c=null,u={};if(t[e]){if(i="UPDATE",(c=t[e])==n)return;t[e]=n}else i="NEW",t[e]=b(n)?n:l(n,o);return u={action:i,actionRoot:t,key:e,value:n},"update"==i&&(u.oldValue=c),r(u),t[e]}};return t=new Proxy(c(t,o),i),n?u(t,o):t}const a=t=>e=>Object(e)instanceof t,f=t=>a(Boolean)(t);var s=Object.prototype.toString;const p=t=>"[object Object]"===s.call(t),b=t=>a(String)(t);var y=()=>i(32);var d=Object.prototype.toString;var h=Object.prototype.toString;var j=Object.prototype.toString;var v=Object.prototype.toString;var g=Object.prototype.toString;var m=Object.prototype.toString;t.curry=function(t){return function(){return t.length==arguments.length?t(...arguments):t.bind(null,...arguments)}},t.debug=function(...t){var r=e(t);r.splice(0,0,window.performance?" : "+(window.performance.now()/1e3).toFixed(3)+": ":" : "+Date()+" : "),console.log(...r)},t.filler=function(){return"__EMPTY__"},t.pipe2=r,t.pipeN=o,t.syncPipe2=n,t.syncPipeN=function(){return Array.prototype.unshift.call(arguments,!1),o.apply(this,arguments)},t.proxr=l,t.is=a,t.isArray=(t=>a(Array)(t)),t.isBoolean=f,t.isDate=(t=>"[object Date]"===d.call(t)),t.isFunction=(t=>a(Function)(t)),t.isNaN=(t=>"[object NaN]"===h.call(t)),t.isNull=(t=>"[object Null]"===j.call(t)),t.isNumber=(t=>a(Number)(t)),t.isObject=p,t.isPromise=(t=>"[object Promise]"===v.call(t)),t.isRegex=(t=>a(RegExp)(t)),t.isString=b,t.isSymbol=(t=>"[object Symbol]"===g.call(t)),t.isUndefined=(t=>"[object Undefined]"===m.call(t)),Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmx1eGkubWluLmpzIiwic291cmNlcyI6WyIuLi9zb3VyY2UvZGVidWcuanMiLCIuLi9zb3VyY2UvcGlwZTIuanMiLCIuLi9zb3VyY2Uvc3luY1BpcGUyLmpzIiwiLi4vc291cmNlL3BpcGVOLmpzIiwiLi4vc291cmNlL3JhbmRvbVRva2VuLmpzIiwiLi4vc291cmNlL3Byb3hyLmpzIiwiLi4vc291cmNlL2lzLmpzIiwiLi4vc291cmNlL2lzQm9vbGVhbi5qcyIsIi4uL3NvdXJjZS9pc09iamVjdC5qcyIsIi4uL3NvdXJjZS9pc1N0cmluZy5qcyIsIi4uL3NvdXJjZS9pc0RhdGUuanMiLCIuLi9zb3VyY2UvaXNOYU4uanMiLCIuLi9zb3VyY2UvaXNOdWxsLmpzIiwiLi4vc291cmNlL2lzUHJvbWlzZS5qcyIsIi4uL3NvdXJjZS9pc1N5bWJvbC5qcyIsIi4uL3NvdXJjZS9pc1VuZGVmaW5lZC5qcyIsIi4uL3NvdXJjZS9jdXJyeS5qcyIsIi4uL3NvdXJjZS9maWxsZXIuanMiLCIuLi9zb3VyY2Uvc3luY1BpcGVOLmpzIiwiLi4vc291cmNlL2lzQXJyYXkuanMiLCIuLi9zb3VyY2UvaXNGdW5jdGlvbi5qcyIsIi4uL3NvdXJjZS9pc051bWJlci5qcyIsIi4uL3NvdXJjZS9pc1JlZ2V4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGJ1aWxkTG9ncyhyZXN0KXtcbiAgdmFyIGxvZyA9IFtdO1xuICB2YXIgcmVzdExlbmd0aCA9IHJlc3QubGVuZ3RoXG4gIGxldCBpID0gMDtcbiAgZm9yICggO2kgPCByZXN0TGVuZ3RoOykge1xuICAgIGxvZy5wdXNoKCByZXN0W2ldICk7XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiBsb2c7XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJ1ZyguLi5yZXN0KSB7XG4gIHZhciBsb2dzID0gYnVpbGRMb2dzKHJlc3QpO1xuICBsb2dzLnNwbGljZShcbiAgICAwLDAsXG4gICAgd2luZG93LnBlcmZvcm1hbmNlID8gJyA6ICcgKyAod2luZG93LnBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgzKSArICc6ICcgXG4gICAgOiAnIDogJyArIERhdGUoKSArICcgOiAnXG4gICk7XG4gIGNvbnNvbGUubG9nKC4uLmxvZ3MpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBpcGUyKGZuMSwgZm4yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZuMi5jYWxsKHRoaXMsIGZuMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfTtcbn0iLCIvKipcbiAqIFxuICogVXNhZ2U6IFN5bmNocm9ub3VzIHBpcGUgd2lsbCB3b3JrcyBleGFjbHkgYXMgeW91IHRoaW5rXG4gKiAgICAgICAgICB0aGF0IHRoaXMgd2lsbCB3YWl0IGZvciBlYWNoIGFjdGlvbiB0byBnZXQgY29tcGxldGVkXG4gKiBcbiAqIHZhciBqb2luQWN0aW9ucyA9IHN5bmNQaXBlMih0aW1lcjEsdGltZXIyLHRpbWVyMyk7XG4gKiBcbiAqIGpvaW5BY3Rpb25zKCkgLy8gICAgIC0+IHlvdSBjYW4gZWl0aGVyIGp1c3QgaW5pdGF0ZSB0aGUgYWN0aW9uXG4gKiBcbiAqIGpvaW5BY3Rpb25zKCkudGhlbiggIC8vIC0+IEFkZCBhIGxpc3RlbmVyIHRvIGdldCB0aGUgY29tcGxldGVkIHN0YXR1c1xuICogICAgICBmdW5jdGlvbigpe1xuICogICAgICBjb25zb2xlLmxvZyhcIkNvbXBsZXRlZCFcIilcbiAqIH0pO1xuICogXG4gKiBAcGFyYW0geypGdW5jdGlvbn0gZm4xIFxuICogQHBhcmFtIHsqRnVuY3Rpb259IGZuMiBcbiAqIFxuICogQHJldHVybiBQcm9taXNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3luY1BpcGUyKGZuMSwgZm4yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGZuMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbjIuY2FsbCh0aGlzLCBkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgcmV0dXJuIGZuMjtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0iLCIvKipcbiAqIFxuICogVXNhZ2U6IEFzeWNocm9ub3VzIHBpcGUgd2hpY2gganVzdCBiaWxkcyBtdWx0aXBsZVxuICogICAgICAgICAgRnVuY3Rpb25zIHRvIG9uZSBhbmQgd2FpdCBmb3IgY29tbWFuZFxuICogXG4gKiB2YXIgam9pbkFjdGlvbnMgPSBwaXBlTihhZGRPbmUsIGFkZFR3bywgYWRkVGhyZWUpO1xuICogam9pbkFjdGlvbnMoKTtcbiAqIFxuICogQHBhcmFtIHsqRnVuY3Rpb259IGZuMSBcbiAqIEBwYXJhbSB7KkZ1bmN0aW9ufSBmbjIgXG4gKiBcbiAqIEByZXR1cm4gUHJvbWlzZVxuICovXG5cblxuaW1wb3J0IHBpcGUyIGZyb20gJy4vcGlwZTInO1xuaW1wb3J0IGlzQm9vbGVhbiBmcm9tICcuL2lzQm9vbGVhbic7XG5pbXBvcnQgc3luY1BpcGUyIGZyb20gJy4vc3luY1BpcGUyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGlwZU4oKSB7XG4gICAgdmFyIGlzQXN5bmM7XG4gICAgaWYgKGlzQm9vbGVhbihhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIGlzQXN5bmMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaXNBc3luYyA9IHRydWU7XG4gICAgfVxuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgbGFzdFJlc3VsdCA9IGFyZ3VtZW50c1swXTtcbiAgICB2YXIgX3BpcGUyID0gaXNBc3luYyA/IHBpcGUyIDogc3luY1BpcGUyO1xuICAgIGlmIChsZW5ndGggPT0gMSlcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbiAgICBpZiAobGVuZ3RoID09IDIpXG4gICAgICAgIHJldHVybiAoX3BpcGUyKGFyZ3NbMF0sIGFyZ3NbMV0pKTtcbiAgICBmb3IgKDsgaSA8IGxlbmd0aCAtIDE7KSB7XG4gICAgICAgIGxhc3RSZXN1bHQgPSBfcGlwZTIobGFzdFJlc3VsdCwgYXJnc1tpICsgMV0pO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tVG9rZW4obGVuZ3RoKSB7XG4gICAgdmFyIGhhc2ggPSAnJztcbiAgICB2YXIgbGFuZ3VhZ2UgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlfLSc7XG5cbiAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBsZW5ndGg7IG9mZnNldCsrKVxuICAgICAgICBoYXNoICs9IGxhbmd1YWdlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsYW5ndWFnZS5sZW5ndGgpKTtcblxuICAgIHJldHVybiBoYXNoO1xufSIsImltcG9ydCBpcyBmcm9tICcuL2lzJztcbmltcG9ydCByYW5kb21Ub2tlbiBmcm9tICcuL3JhbmRvbVRva2VuJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuL2lzT2JqZWN0JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuL2lzU3RyaW5nJztcblxudmFyIGhhc2gzMiA9ICgpID0+IHJhbmRvbVRva2VuKDMyKTtcblxuZnVuY3Rpb24gX3Byb3h5T2JqZWN0UHJvcGVydHkoZGF0YSwgc3Vic2NyaWJlcnMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAoaXNPYmplY3QoZGF0YVtrZXldKSkge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gcHJveHIoZGF0YVtrZXldLCBzdWJzY3JpYmVycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gX19wdWJzdWJfXyhkYXRhLCBzdWJzY3JpYmVycykge1xuICAgIGRhdGEuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmIChpcyhGdW5jdGlvbikoZm4pKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBoYXNoMzIoKTtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzLnNldChpZCwgZm4pO1xuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignVHlwZSBFcnJvcjogc3Vic2NyaWJlciBzaG91bGQgYmUgb2YgdHlwZSBGdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGRhdGEudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVycy5kZWxldGUoaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignVHlwZSBFcnJvcjogc3Vic2NyaWJlciBzaG91bGQgYmUgb2YgdHlwZSBGdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJveHIoZGF0YSwgX3N1YnNjcmliZXJzKSB7XG4gICAgdmFyIGlzUm9vdCA9ICFfc3Vic2NyaWJlcnM7XG4gICAgdmFyIHN1YnNjcmliZXJzID0gX3N1YnNjcmliZXJzID8gX3N1YnNjcmliZXJzIDogbmV3IE1hcCgpO1xuICAgIHZhciBfaGFuZGxlciA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gbnVsbCwgb2xkVmFsdWUgPSBudWxsLCBhY3Rpb25EYXRhID0ge307XG4gICAgICAgICAgICBpZiAoIXRhcmdldFtrZXldKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gJ05FVyc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZSA6IHByb3hyKHZhbHVlLCBzdWJzY3JpYmVycyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9ICdVUERBVEUnO1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlIHZhbHVlIGFyZSBzYW1lXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWN0aW9uRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAnYWN0aW9uJzogYWN0aW9uLFxuICAgICAgICAgICAgICAgICdhY3Rpb25Sb290JzogdGFyZ2V0LFxuICAgICAgICAgICAgICAgICdrZXknOiBrZXksXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdmFsdWVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25EYXRhLm9sZFZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub3RpZnkoYWN0aW9uRGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbm90aWZ5KGRhdGEpIHtcbiAgICAgICAgc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIGZuKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkYXRhID0gbmV3IFByb3h5KF9wcm94eU9iamVjdFByb3BlcnR5KGRhdGEsIHN1YnNjcmliZXJzKSwgX2hhbmRsZXIpO1xuXG4gICAgcmV0dXJuIGlzUm9vdCA/IF9fcHVic3ViX18oZGF0YSwgc3Vic2NyaWJlcnMpIDogZGF0YTtcbn0iLCIvKipcbiAqIExlZ2FjeSBtZXRob2RzIGFuZCBwcml2YXRlIG1ldGhvZHMgYXJlIHByZWZpeGVkIHdpdGggXyh1bmRlcnNjb3JlKS5cbiAqL1xuXG5jb25zdCBpcyA9IHR5cGUgPT4gdGFyZ2V0ID0+IE9iamVjdCh0YXJnZXQpIGluc3RhbmNlb2YgdHlwZTtcblxuZXhwb3J0IGRlZmF1bHQgaXM7XG4iLCJpbXBvcnQgaXMgZnJvbSAnLi9pcy5qcyc7XG5cbmNvbnN0IGlzQm9vbGVhbiA9IHRhcmdldCA9PiBpcyhCb29sZWFuKSh0YXJnZXQpO1xuXG5leHBvcnQgZGVmYXVsdCBpc0Jvb2xlYW47IiwidmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IGlzT2JqZWN0ID0gdGFyZ2V0ID0+IHRvU3RyaW5nLmNhbGwodGFyZ2V0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5leHBvcnQgZGVmYXVsdCBpc09iamVjdDsiLCJpbXBvcnQgaXMgZnJvbSAnLi9pcy5qcyc7XG5jb25zdCBpc1N0cmluZyA9IHRhcmdldCA9PiBpcyhTdHJpbmcpKHRhcmdldCk7XG5cbmV4cG9ydCBkZWZhdWx0IGlzU3RyaW5nOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzRGF0ZSA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IERhdGVdJztcblxuZXhwb3J0IGRlZmF1bHQgaXNEYXRlOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzTmFOID0gdGFyZ2V0ID0+IHRvU3RyaW5nLmNhbGwodGFyZ2V0KSA9PT0gJ1tvYmplY3QgTmFOXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzTmFOOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzTnVsbCA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IE51bGxdJztcblxuZXhwb3J0IGRlZmF1bHQgaXNOdWxsOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzUHJvbWlzZSA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IFByb21pc2VdJztcblxuZXhwb3J0IGRlZmF1bHQgaXNQcm9taXNlOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzU3ltYm9sID0gdGFyZ2V0ID0+IHRvU3RyaW5nLmNhbGwodGFyZ2V0KSA9PT0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzU3ltYm9sOyIsIlxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuY29uc3QgaXNVbmRlZmluZWQgPSB0YXJnZXQgPT4gdG9TdHJpbmcuY2FsbCh0YXJnZXQpID09PSAnW29iamVjdCBVbmRlZmluZWRdJztcblxuZXhwb3J0IGRlZmF1bHQgaXNVbmRlZmluZWQ7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3VycnlOKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGZuLmxlbmd0aCA9PSBhcmd1bWVudHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZuKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBmbi5iaW5kKG51bGwsIC4uLmFyZ3VtZW50cyk7XG4gICAgfTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaWxsZXIoKXtcbiAgICByZXR1cm4gJ19fRU1QVFlfXyc7XG59IiwiaW1wb3J0IHBpcGVOIGZyb20gJy4vcGlwZU4nO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3luY1BpcGVOKCkge1xuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBmYWxzZSk7XG4gICAgcmV0dXJuIHBpcGVOLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiaW1wb3J0IGlzIGZyb20gJy4vaXMuanMnO1xuXG5jb25zdCBpc0FycmF5ID0gdGFyZ2V0ID0+IGlzKEFycmF5KSh0YXJnZXQpO1xuXG5leHBvcnQgZGVmYXVsdCBpc0FycmF5OyIsImltcG9ydCBpcyBmcm9tICcuL2lzLmpzJztcblxuY29uc3QgaXNGdW5jdGlvbiA9IHRhcmdldCA9PiBpcyhGdW5jdGlvbikodGFyZ2V0KTtcblxuZXhwb3J0IGRlZmF1bHQgaXNGdW5jdGlvbjsiLCJpbXBvcnQgaXMgZnJvbSAnLi9pcy5qcyc7XG5cbmNvbnN0IGlzTnVtYmVyID0gdGFyZ2V0ID0+IGlzKE51bWJlcikodGFyZ2V0KTtcblxuZXhwb3J0IGRlZmF1bHQgaXNOdW1iZXI7IiwiaW1wb3J0IGlzIGZyb20gJy4vaXMuanMnO1xuY29uc3QgaXNSZWdleCA9IHRhcmdldCA9PiBpcyhSZWdFeHApKHRhcmdldCk7XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVnZXg7Il0sIm5hbWVzIjpbImJ1aWxkTG9ncyIsInJlc3QiLCJsb2ciLCJyZXN0TGVuZ3RoIiwibGVuZ3RoIiwiaSIsInB1c2giLCJwaXBlMiIsImZuMSIsImZuMiIsImNhbGwiLCJ0aGlzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzeW5jUGlwZTIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRoZW4iLCJkYXRhIiwiY2F0Y2giLCJwaXBlTiIsImlzQXN5bmMiLCJpc0Jvb2xlYW4iLCJwcm90b3R5cGUiLCJzaGlmdCIsImFyZ3MiLCJsYXN0UmVzdWx0IiwiX3BpcGUyIiwicmFuZG9tVG9rZW4iLCJoYXNoIiwibGFuZ3VhZ2UiLCJvZmZzZXQiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfcHJveHlPYmplY3RQcm9wZXJ0eSIsInN1YnNjcmliZXJzIiwia2V5IiwiaXNPYmplY3QiLCJwcm94ciIsIl9fcHVic3ViX18iLCJzdWJzY3JpYmUiLCJmbiIsImlzIiwiRnVuY3Rpb24iLCJpZCIsImhhc2gzMiIsInNldCIsIkVycm9yIiwidW5zdWJzY3JpYmUiLCJoYXMiLCJkZWxldGUiLCJfc3Vic2NyaWJlcnMiLCJub3RpZnkiLCJmb3JFYWNoIiwiaXNSb290IiwiTWFwIiwiX2hhbmRsZXIiLCJ0YXJnZXQiLCJ2YWx1ZSIsImFjdGlvbiIsIm9sZFZhbHVlIiwiYWN0aW9uRGF0YSIsImlzU3RyaW5nIiwiUHJveHkiLCJ0eXBlIiwiT2JqZWN0IiwiQm9vbGVhbiIsInRvU3RyaW5nIiwiU3RyaW5nIiwiYmluZCIsImxvZ3MiLCJzcGxpY2UiLCJ3aW5kb3ciLCJwZXJmb3JtYW5jZSIsIm5vdyIsInRvRml4ZWQiLCJEYXRlIiwidW5zaGlmdCIsIkFycmF5IiwiTnVtYmVyIiwiUmVnRXhwIl0sIm1hcHBpbmdzIjoid0xBQUEsU0FBU0EsRUFBVUMsT0FDYkMsS0FDQUMsRUFBYUYsRUFBS0csV0FDbEJDLEVBQUksT0FDR0YsRUFBSkUsS0FDREMsS0FBTUwsRUFB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
